<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Greenlane College</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="~/favicon.ico">

    <!-- Bootstrap & Icons -->
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        :root {
            --primary: #1a4d2e; /* Green - main brand color */
            --primary-light: #2e7d5a; /* Lighter green for hover */
            --accent: #1a4d2e; /* Orange accent from your design */
            --dark-bg: #0a2918; /* Darker green for footer */
            --text-light: #f8f9fa; /* Light text for dark backgrounds */
            --text-dark: #212529; /* Dark text for light backgrounds */
            --border-radius-sm: 8px;
            --border-radius-lg: 12px;
            --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.12);
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Inter', sans-serif;
            padding-top: 80px; /* Account for fixed navbar */
            color: var(--text-dark);
        }

        /* ====================== */
        /* UPDATED NAVBAR STYLING */
        /* ====================== */
        .navbar {
            background: rgba(255, 255, 255, 0.98) !important;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(26, 77, 46, 0.1);
            padding: 0.8rem 0;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

            .navbar.scrolled {
                padding: 0.5rem 0;
                box-shadow: var(--shadow-md);
            }

        .navbar-brand {
            font-weight: 800;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
        }

            .navbar-brand .brand-part-1 {
                color: var(--primary);
            }

            .navbar-brand .brand-part-2 {
                color: var(--accent);
                background: linear-gradient(135deg, var(--accent), #1a4d2e);
                -webkit-background-clip: text;
                background-clip: text;
                -webkit-text-fill-color: transparent;
            }

        .brand-icon {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2rem;
            margin-right: 0.5rem;
        }

        /* Navigation Links */
        .navbar-nav .nav-link {
            color: var(--text-dark) !important;
            font-weight: 500;
            padding: 0.5rem 1rem !important;
            margin: 0 0.2rem;
            border-radius: var(--border-radius-sm);
            transition: var(--transition);
            position: relative;
        }

            .navbar-nav .nav-link:hover {
                color: var(--primary) !important;
                background: rgba(26, 77, 46, 0.05);
            }

        /* Active menu item styling - Modern Indicator */
        .nav-item.active .nav-link {
            color: var(--primary) !important;
            font-weight: 600;
        }

            .nav-item.active .nav-link::before {
                content: '';
                position: absolute;
                bottom: -2px;
                left: 15px;
                right: 15px;
                height: 3px;
                background: linear-gradient(90deg, var(--primary), var(--accent));
                border-radius: 3px 3px 0 0;
                animation: slideIn 0.3s ease;
            }

        @@keyframes slideIn {
            from {
                width: 0;
                opacity: 0;
            }

            to {
                width: calc(100% - 30px);
                opacity: 1;
            }
        }

        /* ==================== */
        /* DROPDOWN FIXES FOR ALL DEVICES */
        /* ==================== */
        .dropdown-menu {
            border: none;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            padding: 0.5rem 0;
            margin-top: 0.5rem;
            min-width: 220px;
            /* No animations - causes jumpiness */
            animation: none !important;
            transition: opacity 0.2s ease !important;
        }

        /* Remove hover effects that conflict with click */
        .nav-item.dropdown .nav-link:hover {
            background: rgba(26, 77, 46, 0.05);
            transform: none;
        }

        .dropdown-item {
            padding: 0.75rem 1.5rem;
            color: var(--text-dark);
            font-weight: 500;
            transition: var(--transition);
            border-radius: 6px;
            margin: 0 0.5rem;
            width: calc(100% - 1rem);
            transform: none !important;
        }

            .dropdown-item:hover {
                background: linear-gradient(90deg, rgba(26, 77, 46, 0.08), rgba(255, 159, 41, 0.08));
                color: var(--primary);
                padding-left: 1.75rem;
                transform: none !important;
            }

        /* Updated Apply Now Button */
        .btn-apply {
            background: linear-gradient(135deg, var(--accent), #1a4d2e);
            color: white !important;
            border: none;
            padding: 0.6rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(255, 159, 41, 0.3);
            transition: var(--transition);
            margin-left: 1rem;
        }

            .btn-apply:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(255, 159, 41, 0.4);
                background: linear-gradient(135deg, #1a4d2e, var(--accent));
            }

        /* ==================== */
        /* MOBILE DROPDOWN FIXES */
        /* ==================== */
        .navbar-toggler {
            border: none;
            padding: 0.5rem;
        }

            .navbar-toggler:focus {
                box-shadow: none;
            }

        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(26, 77, 46, 0.8)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }

        @@media (max-width: 991.98px) {
            .navbar-collapse {
                background: white;
                border-radius: var(--border-radius-lg);
                padding: 1rem;
                margin-top: 0.5rem;
                box-shadow: var(--shadow-md);
                max-height: 80vh;
                overflow-y: auto;
                overflow-x: hidden;
            }

            .navbar-nav {
                padding: 0;
            }

            .nav-item {
                margin-bottom: 0.5rem;
            }

            .btn-apply {
                margin: 1rem 0 0 0;
                width: 100%;
                text-align: center;
            }
            /* MOBILE DROPDOWN FIXES - NO GAPS */
            .dropdown-menu {
                position: static !important;
                float: none !important;
                width: 100% !important;
                margin: 0.25rem 0 0 0 !important;
                border: 1px solid rgba(0,0,0,0.1) !important;
                box-shadow: none !important;
                border-radius: var(--border-radius-sm) !important;
                background: #f8f9fa;
                padding: 0;
                animation: none !important;
                transition: none !important;
                transform: none !important;
            }

                .dropdown-menu.show {
                    display: block !important;
                }

            .dropdown-item {
                margin: 0 !important;
                width: 100% !important;
                border-radius: 0 !important;
                padding: 0.75rem 1.5rem !important;
                border-bottom: 1px solid rgba(0,0,0,0.05);
            }

                .dropdown-item:hover {
                    background: rgba(26, 77, 46, 0.08) !important;
                    padding-left: 1.75rem !important;
                }

                .dropdown-item:last-child {
                    border-bottom: none;
                }
            /* Dropdown arrow */
            .dropdown-toggle::after {
                float: right;
                margin-top: 0.5rem;
                border-top: 0.3em solid;
                border-right: 0.3em solid transparent;
                border-left: 0.3em solid transparent;
            }
            /* Adjust spacing for dropdown parent */
            .nav-item.dropdown {
                margin-bottom: 0;
            }
            /* Remove gap between dropdown toggle and menu */
            .dropdown-toggle {
                margin-bottom: 0;
            }
        }

        /* ==================== */
        /* UPDATED FOOTER STYLING */
        /* ==================== */
        .footer {
            background: linear-gradient(135deg, var(--dark-bg) 0%, #1a4d2e 100%);
            margin-top: 4rem;
            padding: 4rem 0 2rem;
            position: relative;
            overflow: hidden;
        }

            .footer::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, var(--primary), var(--accent));
            }

            .footer h4, .footer h5 {
                color: var(--text-light);
                font-weight: 600;
            }

            .footer a {
                color: rgba(255, 255, 255, 0.8);
                text-decoration: none;
                transition: var(--transition);
                display: inline-block;
            }

                .footer a:hover {
                    color: var(--accent);
                    transform: translateX(5px);
                }

            .footer ul li {
                margin-bottom: 0.8rem;
            }

            .footer .form-control {
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
                color: white;
            }

                .footer .form-control::placeholder {
                    color: rgba(255, 255, 255, 0.6);
                }

            .footer .btn-success {
                background: var(--primary-light);
                border-color: var(--primary-light);
            }

                .footer .btn-success:hover {
                    background: var(--accent);
                    border-color: var(--accent);
                }

        .social-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            transition: var(--transition);
        }

            .social-icon:hover {
                background: var(--accent);
                transform: translateY(-3px);
                color: var(--text-light);
            }

        /* ==================== */
        /* CHATBOT WIDGET STYLING */
        /* ==================== */
        .chatbot-widget {
            position: fixed !important;
            bottom: 30px !important;
            left: 30px !important;
            z-index: 1000 !important;
        }

        .chatbot-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(26, 77, 46, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

            .chatbot-toggle:hover {
                transform: scale(1.1);
                box-shadow: 0 6px 20px rgba(26, 77, 46, 0.4);
                background: linear-gradient(135deg, var(--primary-light), var(--primary));
            }

        .chatbot-container {
            position: absolute;
            bottom: 70px;
            left: 0;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.1);
            z-index: 1001;
        }

            .chatbot-container.open {
                display: flex;
                animation: slideUp 0.3s ease;
            }

        .chatbot-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

            .chatbot-header h6 {
                margin: 0;
                font-weight: 600;
                font-size: 1rem;
            }

        .chatbot-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        .chat-message {
            margin-bottom: 15px;
            max-width: 80%;
            animation: fadeIn 0.3s ease;
        }

        @@keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chat-message.bot {
            margin-right: auto;
        }

        .chat-message.user {
            margin-left: auto;
        }

        .message-content {
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .chat-message.bot .message-content {
            background: white;
            border: 1px solid #e0e0e0;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .chat-message.user .message-content {
            background: var(--primary);
            color: white;
            border-bottom-right-radius: 4px;
            box-shadow: 0 2px 4px rgba(26, 77, 46, 0.2);
        }

        .message-time {
            font-size: 0.75rem;
            color: #6c757d;
            margin-top: 4px;
            text-align: right;
        }

        .chatbot-footer {
            padding: 15px;
            background: white;
            border-top: 1px solid #e0e0e0;
        }

        .quick-questions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .quick-question-btn {
            background: rgba(26, 77, 46, 0.08);
            border: 1px solid rgba(26, 77, 46, 0.2);
            color: var(--primary);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }

            .quick-question-btn:hover {
                background: rgba(26, 77, 46, 0.15);
                transform: translateY(-1px);
                border-color: var(--primary);
            }

        .chatbot-footer .input-group {
            gap: 8px;
        }

        .chatbot-footer .form-control {
            border: 1px solid #dee2e6;
            border-radius: 25px;
            padding: 0.5rem 1rem;
        }

        .chatbot-footer .btn-success {
            border-radius: 50%;
            width: 42px;
            height: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--primary);
            border: none;
        }

            .chatbot-footer .btn-success:hover {
                background: var(--primary-light);
            }

        @@keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive adjustments for chatbot */
        @@media (max-width: 768px) {
            .chatbot-widget {
                bottom: 20px !important;
                left: 20px !important;
            }

            .chatbot-container {
                width: 300px;
                height: 450px;
                left: 0;
            }

            .chatbot-toggle {
                width: 50px;
                height: 50px;
                font-size: 22px;
            }
        }

        @@media (max-width: 576px) {
            .chatbot-widget {
                bottom: 15px !important;
                left: 15px !important;
            }

            .chatbot-container {
                width: 280px;
                height: 400px;
            }

            .quick-questions {
                flex-direction: column;
            }

            .quick-question-btn {
                width: 100%;
                text-align: center;
            }
        }

        /* WhatsApp Button */
        .whatsapp-chat-widget {
            position: fixed !important;
            bottom: 100px !important;
            right: 30px !important;
            z-index: 1000 !important;
        }

        .whatsapp-button {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            background-color: #25D366;
            color: white;
            border-radius: 50%;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
            transition: all 0.3s ease;
            font-size: 28px;
        }

            .whatsapp-button:hover {
                background-color: #128C7E;
                transform: scale(1.1);
                box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
                color: white;
            }

        /* Responsive adjustments for WhatsApp */
        @@media (max-width: 768px) {
            .whatsapp-chat-widget {
                bottom: 90px !important;
                right: 20px !important;
            }

            .whatsapp-button {
                width: 50px;
                height: 50px;
                font-size: 22px;
            }
        }

        @@media (max-width: 576px) {
            .whatsapp-chat-widget {
                bottom: 80px !important;
                right: 15px !important;
            }
        }

        /* Ensure back-to-top button is also fixed */
        #backToTop {
            position: fixed !important;
            bottom: 90px !important;
            right: 30px !important;
            z-index: 1000 !important;
            display: none;
        }
    </style>
</head>
<body>
    <!-- Updated Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top bg-white shadow-sm" id="mainNavbar">
        <div class="container">
            <a class="navbar-brand fw-bold" asp-page="/Index">
                <!-- Logo Image Replacement -->
                <img src="~/images/logo.svg" alt="Greenlane College Logo" class="brand-logo me-2">
                
            </a>

            <!-- Mobile menu button -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-lg-center">
                    <!-- Home -->
                    <li class="nav-item" id="home-nav">
                        <a class="nav-link" asp-page="/Index">Home</a>
                    </li>

                    <!-- About -->
                    <li class="nav-item" id="about-nav">
                        <a class="nav-link" asp-page="/About">About</a>
                    </li>

                    <!-- STABLE Admissions Dropdown -->
                    <li class="nav-item dropdown" id="admissions-nav">
                        <a class="nav-link dropdown-toggle" href="#" id="admissionsDropdown"
                           role="button" data-bs-toggle="dropdown" aria-expanded="false"
                           aria-haspopup="true" aria-controls="admissionsDropdownMenu">
                            Admissions
                        </a>
                        <ul class="dropdown-menu" id="admissionsDropdownMenu" aria-labelledby="admissionsDropdown">
                            <li><a class="dropdown-item" asp-page="/Principal">Principal's Message</a></li>
                            <li><a class="dropdown-item" asp-page="/Admission">Admission Process</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" asp-page="/Registration">Apply Online</a></li>
                        </ul>
                    </li>

                    <!-- STABLE Academics Dropdown -->
                    <li class="nav-item dropdown" id="academics-nav">
                        <a class="nav-link dropdown-toggle" href="#" id="academicsDropdown"
                           role="button" data-bs-toggle="dropdown" aria-expanded="false"
                           aria-haspopup="true" aria-controls="academicsDropdownMenu">
                            Academics
                        </a>
                        <ul class="dropdown-menu" id="academicsDropdownMenu" aria-labelledby="academicsDropdown">
                            <li><a class="dropdown-item" asp-page="/Academics">Curriculum</a></li>
                            <li><a class="dropdown-item" asp-page="/Fees">Fees Structure</a></li>
                            <li><a class="dropdown-item" asp-page="/Faqs">FAQ</a></li>
                        </ul>
                    </li>

                    <!-- Gallery -->
                    <li class="nav-item" id="gallery-nav">
                        <a class="nav-link" asp-page="/Gallery">Gallery</a>
                    </li>

                    <!-- Location -->
                    <li class="nav-item" id="location-nav">
                        <a class="nav-link" asp-page="/Location">Location</a>
                    </li>

                    <!-- Contact -->
                    <li class="nav-item" id="contact-nav">
                        <a class="nav-link" asp-page="/Contact">Contact</a>
                    </li>

                    <!-- Apply Now Button -->
                    <li class="nav-item ms-lg-2">
                        <a class="btn btn-apply" asp-page="/Registration">
                            <i class="bi bi-pencil-square me-2"></i>Apply Now
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        @RenderBody()
    </main>

    <!-- Footer - Updated structure for better organization -->
    <footer class="footer py-5 text-white">
        <div class="container">
            <div class="row g-4">
                <!-- Brand & Description -->
                <div class="col-lg-4">
                    <h4 class="mb-4 fw-bold d-flex align-items-center">
                        <img src="~/images/logo.svg" alt="Greenlane College Logo" class="logo-small me-2">
                        <span class="text-dark">Greenlane College</span>
                    </h4>


                    <p class="mb-4" style="opacity: 0.9;">Providing exceptional education from Grade 1 through Matric since 2009. Committed to academic excellence and holistic student development in Johannesburg.</p>

                    <!-- Newsletter -->
                    <div class="mb-4">
                        <h6 class="mb-3">Stay Updated</h6>
                        <div class="input-group">
                            <input type="email" class="form-control" placeholder="Your email address" aria-label="Email for newsletter">
                            <button class="btn btn-success" type="button">
                                <i class="bi bi-envelope"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Social Media -->
                    <div class="mt-4">
                        <h6 class="mb-3">Connect With Us</h6>
                        <div class="d-flex gap-3">
                            <a href="#" class="social-icon" aria-label="Facebook">
                                <i class="bi bi-facebook"></i>
                            </a>
                            <a href="#" class="social-icon" aria-label="Twitter">
                                <i class="bi bi-twitter"></i>
                            </a>
                            <a href="#" class="social-icon" aria-label="Instagram">
                                <i class="bi bi-instagram"></i>
                            </a>
                            <a href="#" class="social-icon" aria-label="YouTube">
                                <i class="bi bi-youtube"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="col-lg-2 col-md-6">
                    <h5 class="mb-4 fw-bold">Quick Links</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a asp-page="/Index">Home</a></li>
                        <li class="mb-2"><a asp-page="/About">About Us</a></li>
                        <li class="mb-2"><a asp-page="/Admission">Admissions</a></li>
                        <li class="mb-2"><a asp-page="/Fees">Fee Structure</a></li>
                        <li class="mb-2"><a asp-page="/Gallery">Photo Gallery</a></li>
                        <li class="mb-2"><a asp-page="/Faqs">FAQ's</a></li>
                    </ul>
                </div>

                <!-- Contact Info -->
                <div class="col-lg-3 col-md-6">
                    <h5 class="mb-4 fw-bold">Contact Info</h5>
                    <ul class="list-unstyled">
                        <li class="mb-3 d-flex align-items-start">
                            <i class="bi bi-geo-alt me-2 mt-1"></i>
                            <span>Legal House, 32 Commissioner St,<br>Johannesburg, 2000</span>
                        </li>
                        <li class="mb-3 d-flex align-items-center">
                            <i class="bi bi-telephone me-2"></i>
                            <span>+27 11 492 1778</span>
                        </li>
                        <li class="mb-3 d-flex align-items-center">
                            <i class="bi bi-envelope me-2"></i>
                            <span>info@greenlane.co.za</span>
                        </li>
                        <li class="mb-3 d-flex align-items-center">
                            <i class="bi bi-clock me-2"></i>
                            <span>Mon-Fri: 8:00 AM - 5:00 PM</span>
                        </li>
                    </ul>
                </div>

                <!-- School Hours & CTA -->
                <div class="col-lg-3">
                    <h5 class="mb-4 fw-bold">Visit Us</h5>
                    <div class="mb-4">
                        <p>Schedule a campus tour to experience our facilities and meet our educators.</p>
                        <a href="/tourbooking" class="btn btn-outline-light w-100">
                            <i class="bi bi-calendar-check me-2"></i>Book a Tour
                        </a>
                    </div>

                    <!-- Accreditation -->
                    <div class="mt-4 pt-3 border-top border-white-10">
                        <small class="d-block mb-2">
                            <i class="bi bi-shield-check me-1"></i>
                            Registered with Department of Education
                        </small>
                        <small>EMIS No. 700400313</small>
                    </div>
                </div>
            </div>

            <!-- Divider -->
            <hr class="my-4" style="border-color: rgba(255,255,255,0.1);">

            <!-- Copyright -->
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0">
                        &copy; 2025 Greenlane College. All rights reserved.
                        <a href="#" class="text-white-50 ms-2">Privacy Policy</a> |
                        <a href="#" class="text-white-50">Terms of Service</a>
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0" style="opacity: 0.8;">
                        Building South Africa's Future Leaders
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="backToTop" class="btn btn-success rounded-circle shadow-lg"
            style="position: fixed; bottom: 90px; right: 30px; z-index: 1000; display: none; width: 50px; height: 50px; padding: 0;">
        <i class="bi bi-chevron-up"></i>
    </button>

    <!-- WhatsApp Button -->
    <div class="whatsapp-chat-widget">
        <a href="https://wa.me/27812624572?text=Hi,%20I%20have%20a%20question%20about%20Greenlane%20College%20registration%202026"
           target="_blank"
           class="whatsapp-button"
           aria-label="Chat on WhatsApp">
            <i class="bi bi-whatsapp"></i>
        </a>
    </div>

    <!-- Chat Bot Widget - Fixed Position -->
    <div class="chatbot-widget">
        <button class="chatbot-toggle" id="chatbotToggle" aria-label="Open chat">
            <i class="bi bi-chat-dots"></i>
        </button>

        <div class="chatbot-container" id="chatbotContainer">
            <div class="chatbot-header">
                <h6><i class="bi bi-robot me-2"></i>Greenlane College Assistant</h6>
                <button class="btn-close btn-close-white" id="closeChatbot"></button>
            </div>

            <div class="chatbot-body" id="chatbotBody">
                <div class="chat-message bot">
                    <div class="message-content">
                        Hello! I'm here to help with Greenlane College 2026 registrations.
                        How can I assist you today?
                    </div>
                    <div class="message-time">Just now</div>
                </div>
            </div>

            <div class="chatbot-footer">
                <div class="quick-questions">
                    <button class="quick-question-btn" data-question="What are the registration deadlines?">
                        Registration deadlines?
                    </button>
                    <button class="quick-question-btn" data-question="What documents are required?">
                        Required documents?
                    </button>
                    <button class="quick-question-btn" data-question="How much is the application fee?">
                        Application fee?
                    </button>
                    <button class="quick-question-btn" data-question="What grades do you offer?">
                        Grades offered?
                    </button>
                </div>

                <div class="input-group">
                    <input type="text"
                           class="form-control"
                           id="chatbotInput"
                           placeholder="Type your question..."
                           aria-label="Chat input">
                    <button class="btn btn-success" id="sendMessage" type="button">
                        <i class="bi bi-send"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    <!-- Enhanced Navigation Script with Mobile Dropdown Fixes -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navbar = document.getElementById('mainNavbar');
            const backToTopBtn = document.getElementById('backToTop');

            // Navbar scroll effect
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }

                // Back to top button
                if (window.scrollY > 300) {
                    backToTopBtn.style.display = 'flex';
                    backToTopBtn.style.alignItems = 'center';
                    backToTopBtn.style.justifyContent = 'center';
                } else {
                    backToTopBtn.style.display = 'none';
                }
            });

            // Smooth scroll for back to top
            backToTopBtn.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            // Enhanced active menu highlighting
            function setActiveMenu() {
                const currentPath = window.location.pathname;
                const navMapping = {
                    '/': 'home-nav',
                    '/Index': 'home-nav',
                    '/About': 'about-nav',
                    '/Principal': 'admissions-nav',
                    '/Admission': 'admissions-nav',
                    '/Registration': 'admissions-nav',
                    '/Academics': 'academics-nav',
                    '/Fees': 'academics-nav',
                    '/FAQ': 'academics-nav',
                    '/Gallery': 'gallery-nav',
                    '/Location': 'location-nav',
                    '/Contact': 'contact-nav'
                };

                // Remove active class from all items
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });

                // Add active class to current item
                const activeId = navMapping[currentPath];
                if (activeId) {
                    const activeElement = document.getElementById(activeId);
                    if (activeElement) {
                        activeElement.classList.add('active');

                        // For dropdowns, also highlight the parent
                        if (currentPath.includes('/Principal') ||
                            currentPath.includes('/Admission') ||
                            currentPath.includes('/Registration')) {
                            document.getElementById('admissions-nav')?.classList.add('active');
                        }
                        if (currentPath.includes('/Academics') ||
                            currentPath.includes('/Fees') ||
                            currentPath.includes('/FAQ')) {
                            document.getElementById('academics-nav')?.classList.add('active');
                        }
                    }
                }
            }

            // Initialize active menu
            setActiveMenu();

            // ============================================
            // MOBILE DROPDOWN STABILITY FIXES
            // ============================================

            // Mobile-specific fixes
            if (window.innerWidth < 992) {
                // Initialize all dropdowns with Bootstrap
                const dropdowns = document.querySelectorAll('.nav-item.dropdown');
                dropdowns.forEach(dropdown => {
                    const toggle = dropdown.querySelector('.dropdown-toggle');
                    if (toggle) {
                        const bsDropdown = new bootstrap.Dropdown(toggle, {
                            offset: [0, 2],
                            flip: false, // Prevent dropdown from flipping
                            boundary: 'viewport' // Keep within viewport
                        });

                        // Prevent click events from bubbling
                        toggle.addEventListener('click', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            bsDropdown.toggle();
                        });

                        // Prevent dropdown items from closing immediately
                        const dropdownItems = dropdown.querySelectorAll('.dropdown-item');
                        dropdownItems.forEach(item => {
                            item.addEventListener('click', function(e) {
                                e.stopPropagation();
                            });
                        });
                    }
                });

                // Close dropdowns when clicking outside on mobile
                document.addEventListener('click', function(e) {
                    if (!e.target.closest('.nav-item.dropdown')) {
                        const openDropdowns = document.querySelectorAll('.nav-item.dropdown.show');
                        openDropdowns.forEach(dropdown => {
                            const toggle = dropdown.querySelector('.dropdown-toggle');
                            if (toggle) {
                                const bsDropdown = bootstrap.Dropdown.getInstance(toggle);
                                if (bsDropdown) {
                                    bsDropdown.hide();
                                }
                            }
                        });
                    }
                });

                // Close navbar when clicking a link on mobile
                document.querySelectorAll('.nav-link, .dropdown-item').forEach(link => {
                    link.addEventListener('click', function(e) {
                        if (!this.classList.contains('dropdown-toggle')) {
                            const navbarCollapse = document.getElementById('navbarNav');
                            if (navbarCollapse.classList.contains('show')) {
                                const bsCollapse = bootstrap.Collapse.getInstance(navbarCollapse);
                                if (bsCollapse) {
                                    bsCollapse.hide();
                                }
                            }
                        }
                    });
                });
            }

            // Chat Bot Functionality
            const chatbotToggle = document.getElementById('chatbotToggle');
            const closeChatbot = document.getElementById('closeChatbot');
            const chatbotContainer = document.getElementById('chatbotContainer');
            const chatbotBody = document.getElementById('chatbotBody');
            const chatbotInput = document.getElementById('chatbotInput');
            const sendMessage = document.getElementById('sendMessage');
            const quickQuestionBtns = document.querySelectorAll('.quick-question-btn');

            // Toggle chatbot
            chatbotToggle.addEventListener('click', () => {
                chatbotContainer.classList.toggle('open');
                if (chatbotContainer.classList.contains('open')) {
                    chatbotInput.focus();
                }
            });

            closeChatbot.addEventListener('click', () => {
                chatbotContainer.classList.remove('open');
            });

            // Quick question buttons
            quickQuestionBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const question = btn.getAttribute('data-question');
                    sendUserMessage(question);
                    handleBotResponse(question);
                });
            });

            // Send message on button click
            sendMessage.addEventListener('click', sendUserMessageFromInput);

            // Send message on Enter key
            chatbotInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendUserMessageFromInput();
                }
            });

            function sendUserMessageFromInput() {
                const message = chatbotInput.value.trim();
                if (message) {
                    sendUserMessage(message);
                    handleBotResponse(message);
                    chatbotInput.value = '';
                    chatbotInput.focus();
                }
            }

            function sendUserMessage(message) {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'chat-message user';
                messageDiv.innerHTML = `
                    <div class="message-content">${message}</div>
                    <div class="message-time">${getCurrentTime()}</div>
                `;
                chatbotBody.appendChild(messageDiv);
                chatbotBody.scrollTop = chatbotBody.scrollHeight;
            }

            function handleBotResponse(userMessage) {
                // Responses database
                const responses = {
                    'registration deadlines': 'Our 2026 registration deadlines are:<br><br>• Early Bird: March 31, 2026<br>• Final Deadline: May 31, 2026<br>• Applications open: January 1, 2026',
                    'required documents': 'Required documents for registration:<br><br>1. Birth Certificate<br>2. Immunization Record<br>3. Proof of Residence<br>4. Parent ID Copy<br>5. Latest School Report (for transfers)<br>6. ID Photo (passport size)',
                    'application fee': 'The non-refundable application fee is R250. Payment details are emailed after submission. Early bird applications (before March 31, 2026) qualify for a free starter pack worth R800!',
                    'grades offered': 'We offer comprehensive education from:<br><br>• Grade 1 (Age 4-5)<br>• Foundation Phase: Grades 1-3<br>• Intermediate Phase: Grades 4-6<br>• Senior Phase: Grade 7<br>• FET Phase: Grades 8-12 (Matric)'
                };

                const messageLower = userMessage.toLowerCase();
                let response = 'Thank you for your question! For specific information about ' + userMessage + ', please contact our admissions office at admissions2026@greenlane.co.za or call +27 11 492 1778. Our team will be happy to assist you.';

                // Check for keywords in the question
                for (const [key, value] of Object.entries(responses)) {
                    if (messageLower.includes(key)) {
                        response = value;
                        break;
                    }
                }

                // Simulate typing delay
                setTimeout(() => {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'chat-message bot';
                    messageDiv.innerHTML = `
                        <div class="message-content">${response}</div>
                        <div class="message-time">${getCurrentTime()}</div>
                    `;
                    chatbotBody.appendChild(messageDiv);
                    chatbotBody.scrollTop = chatbotBody.scrollHeight;
                }, 1000);
            }

            function getCurrentTime() {
                const now = new Date();
                return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            }

            // Auto-open chat after 10 seconds on registration page
            if (window.location.pathname.includes('/Registration')) {
                setTimeout(() => {
                    if (!localStorage.getItem('chatbotOpenedRegistration')) {
                        chatbotContainer.classList.add('open');
                        localStorage.setItem('chatbotOpenedRegistration', 'true');
                    }
                }, 10000);
            }

            // Auto-open on other pages after 20 seconds
            setTimeout(() => {
                if (!localStorage.getItem('chatbotOpenedGeneral') && !window.location.pathname.includes('/Registration')) {
                    chatbotContainer.classList.add('open');
                    localStorage.setItem('chatbotOpenedGeneral', 'true');

                    // Auto-close after 30 seconds if no interaction
                    setTimeout(() => {
                        if (chatbotContainer.classList.contains('open')) {
                            chatbotContainer.classList.remove('open');
                        }
                    }, 30000);
                }
            }, 20000);
        });
    </script>


    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>